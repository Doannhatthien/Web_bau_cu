<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B·∫ßu C·ª≠ Kh√©p K√≠n</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .private-voting-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
        }

        .lock-screen {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            text-align: center;
        }

        .lock-icon {
            font-size: 5em;
            margin-bottom: 20px;
            animation: lockPulse 2s ease-in-out infinite;
        }

        @keyframes lockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .password-input-group {
            max-width: 400px;
            margin: 30px auto;
        }

        .password-input {
            width: 100%;
            padding: 20px;
            font-size: 1.3em;
            text-align: center;
            border: 3px solid #E0E0E0;
            border-radius: 12px;
            letter-spacing: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--danger-color);
            box-shadow: 0 0 0 5px rgba(255, 23, 68, 0.1);
        }

        .password-input.error {
            border-color: var(--danger-color);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .voting-area {
            display: none;
        }

        .voting-area.unlocked {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .security-notice {
            background: linear-gradient(135deg, #FFE0E0, #FFF0F0);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid var(--danger-color);
        }

        .security-notice strong {
            color: var(--danger-color);
        }

        .candidate-card-private {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #E0E0E0;
            transition: all 0.3s ease;
        }

        .candidate-card-private:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .candidate-card-private.selected {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, #E8F5E9, #F1F8E9);
        }

        .vote-confirm-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí B·∫ßu C·ª≠ Kh√©p K√≠n</h1>
            <p class="subtitle">Ch·∫ø ƒë·ªô b·∫£o m·∫≠t cao - Y√™u c·∫ßu m·∫≠t kh·∫©u</p>
            
            <div class="user-info" id="userInfo" style="display: none;">
                <div class="user-details">
                    <div class="user-avatar">üë§</div>
                    <div class="user-text">
                        <h3 id="userName">-</h3>
                        <p id="userRole">-</p>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">ƒêƒÉng xu·∫•t</button>
            </div>
        </header>

        <div class="private-voting-container">
            <!-- Back button -->
            <button onclick="window.location.href='index.html'" class="btn btn-secondary" style="margin-bottom: 20px;">
                ‚Üê Quay l·∫°i trang ch√≠nh
            </button>

            <!-- Lock Screen -->
            <div class="lock-screen" id="lockScreen">
                <div class="lock-icon">üîê</div>
                <h2 style="color: var(--danger-color); margin-bottom: 10px;">Khu v·ª±c b·∫£o m·∫≠t</h2>
                <p style="color: #666; font-size: 1.1em; margin-bottom: 30px;">
                    ƒê√¢y l√† phi√™n b·∫ßu c·ª≠ kh√©p k√≠n. Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ti·∫øp t·ª•c.
                </p>

                <div class="security-notice">
                    <strong>üîí L∆∞u √Ω b·∫£o m·∫≠t:</strong>
                    <ul style="text-align: left; margin-top: 10px; line-height: 1.8;">
                        <li>M·∫≠t kh·∫©u ch·ªâ ƒë∆∞·ª£c admin cung c·∫•p</li>
                        <li>Kh√¥ng chia s·∫ª m·∫≠t kh·∫©u v·ªõi ng∆∞·ªùi kh√¥ng li√™n quan</li>
                        <li>M·ªói t√†i kho·∫£n ch·ªâ ƒë∆∞·ª£c b·ªè phi·∫øu 1 l·∫ßn</li>
                        <li>Phi·∫øu b·∫ßu c·ªßa b·∫°n ƒë∆∞·ª£c b·∫£o m·∫≠t tuy·ªát ƒë·ªëi</li>
                    </ul>
                </div>

                <div class="password-input-group">
                    <input 
                        type="password" 
                        id="electionPasswordInput" 
                        class="password-input" 
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        maxlength="20"
                    >
                    <p id="passwordError" style="color: var(--danger-color); margin-top: 10px; display: none;">
                        ‚ùå M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c!
                    </p>
                </div>

                <button id="unlockVoting" class="btn btn-danger btn-large" style="max-width: 400px; margin: 20px auto;">
                    üîì M·ªü kh√≥a v√† B·ªè phi·∫øu
                </button>

                <p style="color: #999; margin-top: 20px; font-size: 0.9em;">
                    Li√™n h·ªá admin n·∫øu b·∫°n ch∆∞a c√≥ m·∫≠t kh·∫©u
                </p>
            </div>

            <!-- Voting Area (Hidden initially) -->
            <div class="voting-area" id="votingArea">
                <div class="section">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                        <span style="font-size: 2em;">‚úÖ</span>
                        <div>
                            <h2 style="margin: 0; color: var(--secondary-color);">X√°c th·ª±c th√†nh c√¥ng!</h2>
                            <p style="margin: 5px 0 0 0; color: #666;">B·∫°n c√≥ th·ªÉ b·ªè phi·∫øu ngay b√¢y gi·ªù</p>
                        </div>
                    </div>

                    <div class="security-notice">
                        <strong>üîí Phi·∫øu b·∫ßu c·ªßa b·∫°n ho√†n to√†n b√≠ m·∫≠t</strong>
                        <p style="margin-top: 10px; color: #666;">
                            Kh√¥ng ai c√≥ th·ªÉ bi·∫øt b·∫°n ƒë√£ b·∫ßu cho ai. H·ªá th·ªëng ch·ªâ ghi nh·∫≠n r·∫±ng b·∫°n ƒë√£ tham gia b·ªè phi·∫øu.
                        </p>
                    </div>
                </div>

                <div class="section">
                    <h2>üë• Danh S√°ch ·ª®ng Vi√™n</h2>
                    <p style="color: #666; margin-bottom: 20px;">Click v√†o ·ª©ng vi√™n ƒë·ªÉ ch·ªçn, sau ƒë√≥ x√°c nh·∫≠n b·∫ßu c·ª≠ b√™n d∆∞·ªõi</p>
                    
                    <div id="candidatesListPrivate">
                        <!-- Candidates will be loaded here -->
                    </div>
                </div>

                <div class="vote-confirm-section" id="voteConfirmSection" style="display: none;">
                    <h3 style="color: var(--primary-color); margin-bottom: 15px;">üìù X√°c nh·∫≠n l·ª±a ch·ªçn c·ªßa b·∫°n</h3>
                    
                    <div style="background: #F5F5F5; padding: 20px; border-radius: 10px; margin: 15px 0;">
                        <p style="color: #666; margin-bottom: 10px;">B·∫°n ƒë√£ ch·ªçn:</p>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span style="font-size: 2em;">üë§</span>
                            <div>
                                <h3 id="selectedCandidateName" style="margin: 0; color: var(--dark-color);">-</h3>
                                <p id="selectedCandidatePosition" style="margin: 5px 0 0 0; color: #666;">-</p>
                            </div>
                        </div>
                    </div>

                    <div style="background: #FFF3E0; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid var(--warning-color);">
                        <strong style="color: var(--warning-color);">‚ö†Ô∏è L∆∞u √Ω:</strong>
                        <p style="margin-top: 8px; color: #666;">
                            Sau khi x√°c nh·∫≠n, b·∫°n KH√îNG TH·ªÇ thay ƒë·ªïi l·ª±a ch·ªçn. Vui l√≤ng ki·ªÉm tra k·ªπ tr∆∞·ªõc khi b·∫•m n√∫t x√°c nh·∫≠n.
                        </p>
                    </div>

                    <div class="button-group">
                        <button id="confirmVoteBtn" class="btn btn-success" style="flex: 2;">
                            ‚úì X√°c nh·∫≠n B·∫ßu c·ª≠
                        </button>
                        <button id="cancelVoteBtn" class="btn btn-secondary" style="flex: 1;">
                            ‚úï H·ªßy
                        </button>
                    </div>
                </div>

                <!-- Already Voted Notice -->
                <div class="section" id="alreadyVotedNotice" style="display: none;">
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 5em; margin-bottom: 20px;">‚úÖ</div>
                        <h2 style="color: var(--secondary-color);">B·∫°n ƒë√£ b·ªè phi·∫øu!</h2>
                        <p style="color: #666; font-size: 1.1em; margin-top: 10px;">
                            C·∫£m ∆°n b·∫°n ƒë√£ tham gia b·∫ßu c·ª≠. Phi·∫øu b·∫ßu c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n.
                        </p>
                        <button onclick="window.location.href='index.html'" class="btn btn-primary" style="margin-top: 20px;">
                            Xem k·∫øt qu·∫£ b·∫ßu c·ª≠
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2025 - H·ªá Th·ªëng B·∫ßu C·ª≠ L·ªõp Blockchain | B·∫ßu c·ª≠ Kh√©p k√≠n</p>
        </footer>
    </div>

    <script src="auth.js"></script>
    <script src="private-voting.js"></script>
</body>
</html>
